
<div class="SD-topo-box">
  <div class="SD-topo-box-title">
    <span>Répartition des dépenses de la solideo</span>
  </div>
  <div class="SD-topo_chart-box">
    <div class="topo-chart">
      <%= pie_chart({"Ouvrages" => 1130507000, "Réserve" => 94470000, "Innovation" => 47300000, "Frais de fonctionnement" => 103975000}, library: {
      chart: {
           backgroundColor: '#fff',
        style:{
          fontFamily: "Spectral",
          maxWidth: "500px",
          }
        },
  title: {
    text:'<em>Dépenses prévues de la Solideo (2016)</em>',
        margin:40,
        style: {
          color: '#8F8F8F',
        
          },
    },
  colors: ["#0287D1", '#587577', "#AED9E6", '#4F82CE'],

        tooltip: {
         # useHTML: true,
         # pointFormat: 'Montant : <b>{point.y:,.0f}€</b><br>',
         # shared: true,  
        },

        plotOptions: {
            pie: {
                allowPointSelect: true,
              minSize: 200,
               # cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<em>{point.name}<br>{point.y:,.0f}€ - {point.percentage:.1f} %</em>',
                    style: {
                      color: "#8F8F8F",
                      fontSize: "12px",
                      fontWeight: "400",

                      }
                }
            }
        },
      }) %>

  </div>
    
    
      <div id="SD-topo-repartition">
        <div>
 
        <%= column_chart [{name: "Dépenses prévues", data: OuvragesDepense.unscope(:order).group_by_year(:date).sum('montant_prevu')},{name: "Décaissements", data: OuvragesDepense.unscope(:order).group_by_year(:date).sum('montant')}], library: {
        chart:{
            type: 'column',
            backgroundColor: '#fff',
   
            style:{
            fontFamily: "Spectral",  
               maxWidth: '500px',
              minWidth: '500px',
            },
         
            },
      
        title: {
          text:'<em>Dépenses réelles et prévues des ouvrages par année en €</em>',
          margin:40,
          style: {
                  color: "#8F8F8F",
                  fontWeight: "400",
                  },
        },
      xAxis:  {
        type: 'datetime',
        },
        
      yAxis: {
          gridLineColor: '#fff', 
         },
        colors: ["#8F8F8F", "#0287D1"],
     
  
        plotOptions: {
          column: {
           pointWidth: 15,
           tooltip: {        
              backgroundColor: "#fff",        
              style: {
                  fontSize: '12px',     
              },
              
             },
           },
    
          },


          }
      %>         
        </div>
         <div class="SF-topo-explication">
         <% if @solideo_depenses_ouvrages_prevu_date < @solideo_depenses_ouvrages %><span class="negative"> + <%= number_with_delimiter((@solideo_depenses_ouvrages-@solideo_depenses_ouvrages_prevu_date).to_i, :delimiter => ' ')%> € </span><% else %><span class="positive"> - <%= number_with_delimiter((@solideo_depenses_ouvrages_prevu_date-@solideo_depenses_ouvrages).to_i, :delimiter => ' ')%> €</span><% end %> par rapport aux dépenses prévues à date.
         <br><%= link_to "En savoir plus " , ouvrages_depenses_path %>
      </div>  
      </div>
     

  </div>
  

</div>
  

