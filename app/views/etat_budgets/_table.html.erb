
<div  class="table-box">

<% if !@etat_depenses.nil? %>

    <div class="ED_table">
      <table>
        <thead>
          <tr>
            <th scope="col">Dates</th>
            <th scope="col"><%= link_to solideo_depenses_path do %>Solideo<%end%></th>
            <th scope="col">Cojo</th>
            <th scope="col">Héritage</th>
            <th scope="col">Haute Performance</th>
            <th scope="col" class="border-none">Total</th>
          </tr>
        </thead>
        <tbody>
          <% @etat_depenses.unscope(:order).group_by_year(:date).each do |etat_depense| %>
          <tr>
            <th scope="row"><%= etat_depense.date.strftime("%Y") %></th>
            <td><div class="table-row"><div class="table-row-left"><%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "solideo", etat_depense.date ).sum('cp_conso').to_i, :delimiter => ' ') %> € </div> <div class="table-row-right"> / <%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "solideo",etat_depense.date).sum('cp_prevu').to_i, :delimiter => ' ') %> €</div></div></td>
            <td><div class="table-row"><div class="table-row-left"><%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "cojo", etat_depense.date ).sum('cp_conso').to_i, :delimiter => ' ') %> € </div> <div class="table-row-right"> / <%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "cojo", etat_depense.date).sum('cp_prevu').to_i, :delimiter => ' ') %> €</div></div></td>
            <td><div class="table-row"><div class="table-row-left"><%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "heritage", etat_depense.date ).sum('cp_conso').to_i, :delimiter => ' ') %> € </div> <div class="table-row-right"> / <%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "heritage", etat_depense.date).sum('cp_prevu').to_i, :delimiter => ' ') %> €</div></div> </td>
            <td><div class="table-row"><div class="table-row-left"><%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "hauteperformance", etat_depense.date ).sum('cp_conso').to_i, :delimiter => ' ') %> € </div> <div class="table-row-right"> / <%= number_with_delimiter(EtatDepense.where('beneficiaire = ? AND date = ?', "hauteperformance", etat_depense.date).sum('cp_prevu').to_i, :delimiter => ' ') %> €</div></div></td>
            <td class="border-none"><div class="table-row"><div class="table-row-left"><%= number_with_delimiter(EtatDepense.where('date = ?', etat_depense.date ).sum('cp_conso').to_i, :delimiter => ' ') %> € </div> <div class="table-row-right"> / <%= number_with_delimiter(EtatDepense.where('date = ?', etat_depense.date).sum('cp_prevu').to_i, :delimiter => ' ') %> €</div></div></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  
   <br><br>
     <div class="EB-details">
    <%= link_to "Voir le détails des dépenses de l'état" , etat_depenses_path %>
  </div>
  <% else %>
    <div>
      Aucune dépense renseignée
    </div>
  <%end%>
  
   
 
  
 
    
</div>