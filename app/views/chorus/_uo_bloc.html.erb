
<% if !@uo.nil? &&  !@uo.first.nil?%>
<div class="SD-topo-box" id="dynamique-uo">
  <div class="SD-topo-box-title2">Visualisation au niveau des UO (<%= @uo_arr.length %>)     
  </div><br>
  <div class="chorus-dropdown-box">
   <div class="dropdown dropdown-chorus">
     <button class="btn btn-secondary dropdown-toggle dropdown-select-chorus" type="button" id="dropdownMenuButtonuo" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Sélectionner un UO <i class="fas fa-chevron-down"></i></button>
      <div class="dropdown-menu dropwdown-menu-chorus" aria-labelledby="dropdownMenuButtonuo">
          <%= form_with url: select_uo_path(:bop_id => @bops_show, :date => @dates, :budget => @budget, :programme => @search), id: "uo_form" do |f|%>
          <label><%= f.check_box :searchuo,{:multiple => true}, @search, nil %> Tout sélectionner </label>
          <% (0..@uo_arr.length-1).each do |i|%>
            <label><%= f.check_box :id,{:multiple => true}, @uo_arr[i], nil %>  <%= @uo_arr[i]%></label>
          <% end %>
        <div class="chorus-submit-form"><%= f.submit "Afficher", class: "submit-chorus submit-chorus-uo"%></div>
         <% end %>
      </div>
    </div>
  </div>  
  <div id="uo">
    <%= render 'chorus/uo'%>
  </div>
</div>
<div id="actions">
    <%= render 'chorus/actions'%>
</div>  



<script>
  var elementuoid = '#id_'+'<%= @uo.first.centre_financier.downcase%>'
  $(elementuoid).prop('checked', true);

</script>

<script>
    var searchuoid = '#searchuo_' + '<%= @search %>';

$(searchuoid).click(function () {
  if ($(searchuoid).is(':checked')){
   <% @uo_arr.each do |uo|%>
      $('#id_'+'<%= uo.downcase%>').prop('checked', true);
   <% end %> 
  }
  else {
   <% @uo_arr[1..].each do |uo|%>
      $('#id_'+'<%= uo.downcase%>').prop('checked', false);
   <% end %>  
    
  }
  
});
$('.submit-chorus-uo').on("click",function(){  
   $("#dropdownMenuButtonuo").dropdown('toggle');
});
</script>
<% end %>